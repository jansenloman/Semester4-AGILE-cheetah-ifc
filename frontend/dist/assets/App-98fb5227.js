import{f as j,_ as O,a as M,b as P}from"./SearchBar.vue_vue_type_style_index_0_lang-265b0b09.js";import{a as B}from"./classes-929a4aba.js";import{d as g,G as K,o as m,b as f,n,x as R,a as c,t as T,i as $,M as F,l as D,c as E,F as N,y as G,u as S,H as x,P as L,A as b,S as w,w as U}from"./index-a9e6055c.js";import{_ as k,a as H,b as J}from"./SelectInput.vue_vue_type_script_setup_true_lang-7a244b2a.js";import{i as Y,a as q,n as z,v as Q,b as W}from"./inputValidators-a742f5c9.js";import{T as y,S as X,N as Z}from"./inputs-cac6fc85.js";import{_ as ee}from"./MaybeImage.vue_vue_type_script_setup_true_lang-2985bd86.js";import{_ as te}from"./Pagination.vue_vue_type_script_setup_true_lang-b254a2b2.js";import"./FetchWrapper.vue_vue_type_script_setup_true_lang-39891d1c.js";import"./requests-8927b21a.js";const ae={class:"modal modal-lg d-block",tabindex:"-1","aria-hidden":"true",role:"dialog"},ie={class:"modal-dialog"},ne={class:"modal-content"},se={class:"modal-header tss-bg-secondary"},oe={class:"modal-title"},le={class:"modal-body"},re={class:"d-lg-flex d-block mb-3"},de={class:"mx-3 edit-modal-inputs"},ce={class:"modal-footer"},me=g({__name:"EditMenuModal",props:{item:null},emits:["edit","close","delete"],setup(r,{emit:s}){var e,i,u,V,I;const o=r,t={isValidating:!1},h=$(F),l={name:new y("Nama",((e=o.item)==null?void 0:e.name)??"",Y("Nama menu tidak boleh kosong!")),category:new X("Kategori",((i=o.item)==null?void 0:i.category)??"",(h.value||[]).map(d=>({label:j(d),value:d})),q("Kategori menu tidak boleh kosong")),description:new y("Deskripsi",((u=o.item)==null?void 0:u.description)??"",z,{isTextarea:!0}),price:new Z("Harga",((V=o.item)==null?void 0:V.price)??0,Q)},_=K(new y("Link Gambar",((I=o.item)==null?void 0:I.img)??"",W));function a(){t.isValidating=!0;let d=!1;for(let p in l){const v=!l[p].validate();d=d||v}d=d||!_.value.validate(),!d&&s("edit",{name:l.name.value,category:l.category.value,description:l.description.value,img:_.value.value,price:l.price.value},o.item)}return(d,p)=>{var v,C;return m(),f("div",ae,[n("div",ie,[n("div",ne,[n("div",se,[n("h5",oe,R(((v=r.item)==null?void 0:v.name)||"Menu Baru"),1),n("button",{class:"btn-close",onClick:p[0]||(p[0]=A=>d.$emit("close"))})]),n("div",le,[n("div",re,[c(ee,{src:_.value.value,alt:((C=r.item)==null?void 0:C.name)||"Display Image",class:"edit-modal-img"},null,8,["src","alt"]),n("div",de,[c(k,{input:l.name,shouldValidate:t.isValidating},null,8,["input","shouldValidate"]),c(H,{input:l.category,shouldValidate:t.isValidating},null,8,["input","shouldValidate"]),c(k,{input:l.description,shouldValidate:t.isValidating},null,8,["input","shouldValidate"]),c(k,{input:_.value,shouldValidate:t.isValidating},null,8,["input","shouldValidate"]),c(J,{input:l.price,shouldValidate:t.isValidating},null,8,["input","shouldValidate"])])])]),n("div",ce,[n("button",{onClick:a,class:"float-end btn btn-primary"},"Simpan"),r.item?(m(),f("button",{key:0,onClick:p[1]||(p[1]=A=>s("delete",r.item.id)),class:"float-end btn btn-danger"},"Hapus")):T("",!0)])])])])}}});const ue=["src","alt"],_e=g({__name:"FAB",props:{src:null,alt:null},emits:["click"],setup(r){return(s,o)=>(m(),f("button",{class:"fab shadow",onClick:o[0]||(o[0]=t=>s.$emit("click"))},[n("img",{src:r.src,alt:r.alt||""},null,8,ue)]))}});const pe={class:"d-flex align-items-center mw-70-lg"},fe={class:"list-group"},ve=g({__name:"View",setup(r){const s=$(x),o=$(L),t=D({isEditing:!1,viewedItem:void 0});function h(a){s.refetch({search:a})}function l(a,e){o.run(async()=>{if(e){if(!(await fetch(`${b}/menu/${e.id}`,{method:"PUT",body:JSON.stringify(a),credentials:"include",headers:{"Content-Type":"application/json"}})).ok)throw new Error(w);e.name=a.name,e.description=a.description,e.price=a.price,e.category=a.category,e.img=a.img}else{const i=await fetch(`${b}/menu`,{method:"POST",body:JSON.stringify(a),credentials:"include",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(w);if(s.page!=s.totalPages-1)return;const u=await i.json();s.data.push(B.fromJSON(u))}t.viewedItem=void 0})}function _(a){confirm("Apakah anda yakin anda ingin menghapus item menu ini?")&&o.run(async()=>{if(!(await fetch(`${b}/menu/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error(w);t.viewedItem=void 0;const i=s.data.findIndex(u=>u.id==a);i!=-1&&s.data.splice(i,1)})}return(a,e)=>(m(),f(N,null,[t.viewedItem!==void 0?(m(),E(me,{key:0,item:t.viewedItem,onClose:e[0]||(e[0]=i=>t.viewedItem=void 0),onDelete:_,onEdit:l},null,8,["item"])):T("",!0),n("div",pe,[c(O,{onSearch:h,class:"w-100 me-5"})]),n("div",null,[n("ul",fe,[(m(!0),f(N,null,G(S(s).data,i=>(m(),E(M,{item:i,key:i.id,onClick:u=>t.viewedItem=i},null,8,["item","onClick"]))),128))])]),c(te,{injectKey:S(x)},null,8,["injectKey"]),c(_e,{src:"/add.svg",onClick:e[1]||(e[1]=i=>t.viewedItem=null)})],64))}}),Ce=g({__name:"App",setup(r){return(s,o)=>(m(),E(P,null,{default:U(()=>[c(ve)]),_:1}))}});export{Ce as default};
